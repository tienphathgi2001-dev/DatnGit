<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>L·ªãch s·ª≠ mua h√†ng</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">

</head>

<body>

    <th:block th:include="Common/Header.html"></th:block>

    <div class="container">
        <h2>üì¶ L·ªãch s·ª≠ mua h√†ng</h2>

        <!-- N·∫øu kh√¥ng c√≥ ƒë∆°n h√†ng -->
        <div th:if="${#lists.isEmpty(orders)}">
            <p>B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>
        </div>

        <form th:action="@{/user/orders}" method="get" class="mb-3 d-flex justify-content-center gap-2">
            <input type="date" name="fromDate" th:value="${fromDate}" class="form-control" placeholder="T·ª´ ng√†y">
            <input type="date" name="toDate" th:value="${toDate}" class="form-control" placeholder="ƒê·∫øn ng√†y">
            <button type="submit" class="btn btn-primary">T√¨m</button>
        </form>

        <!-- B·∫£ng ƒë∆°n h√†ng -->
        <table class="table table-striped" th:if="${!#lists.isEmpty(orders)}">
            <thead>
                <tr>
                    <th>M√£ ƒë∆°n</th>
                    <th>Ng√†y ƒë·∫∑t</th>
                    <th>T·ªïng ti·ªÅn</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Chi ti·∫øt</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="order : ${orders}">
                    <td th:text="${order.code}"></td>
                    <td th:text="${#dates.format(order.createdDate, 'dd/MM/yyyy HH:mm')}"></td>
                    <td th:text="${#numbers.formatDecimal(order.total, 0, 'POINT', 0, 'COMMA')} + ' ƒë'"></td>
                    <td>
                        <span th:switch="${order.status}">
                        <span th:case="0" class="text-danger">ƒê√£ h·ªßy</span>
                        <span th:case="4" class="text-success">ƒê√£ giao</span>
                        <span th:case="*">Kh√¥ng x√°c ƒë·ªãnh</span>
                        </span>
                    </td>

                    <td>
                        <a th:href="@{'/user/orders/' + ${order.id}}" class="btn btn-sm btn-primary">Xem</a>
                    </td>
                </tr>
            </tbody>
        </table>


        <!-- Card view cho mobile -->
        <!-- <div th:each="order : ${orders.content}" class="order-card">
            <p><strong>M√£ ƒë∆°n:</strong> <span th:text="${order.code}"></span></p>
            <p><strong>Ng√†y ƒë·∫∑t:</strong> <span th:text="${#dates.format(order.createdDate, 'dd/MM/yyyy HH:mm')}"></span></p>
            <p><strong>T·ªïng ti·ªÅn:</strong> <span th:text="${#numbers.formatDecimal(order.total, 0, 'POINT', 0, 'COMMA')} + ' ƒë'"></span></p>
            <p><strong>Tr·∫°ng th√°i:</strong> <span th:text="${order.status}"></span></p>
            <a th:href="@{'/user/orders/' + ${order.id}}" class="btn btn-sm btn-primary">Xem</a>
        </div> -->
        <nav th:if="${orders.totalPages > 1}">
            <ul class="pagination">
                <li class="page-item" th:classappend="${orders.first} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/orders(page=${orders.number - 1}, fromDate=${fromDate}, toDate=${toDate})}">¬´</a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, orders.totalPages - 1)}" th:classappend="${i == orders.number} ? 'active'">
                    <a class="page-link" th:href="@{/user/orders(page=${i}, fromDate=${fromDate}, toDate=${toDate})}" th:text="${i + 1}"></a>
                </li>
                <li class="page-item" th:classappend="${orders.last} ? 'disabled'">
                    <a class="page-link" th:href="@{/user/orders(page=${orders.number + 1}, fromDate=${fromDate}, toDate=${toDate})}">¬ª</a>
                </li>
            </ul>
        </nav>


    </div>
</body>

</html>