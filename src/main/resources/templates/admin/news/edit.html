<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
<meta charset="UTF-8">
<title>Sửa bài viết</title>
<link
	th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}"
	rel="stylesheet">
<link th:href="@{/css/style.css}" rel="stylesheet">
<link
	th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css}"
	rel="stylesheet">
<style>
.back-button {
	position: absolute;
	top: 15px; /* cách top container */
	left: 15px; /* cách left container */
	font-size: 1.5rem;
	text-decoration: none;
	color: #007bff; /* màu xanh giống link */
	z-index: 10; /* đảm bảo nổi trên container */
}

.back-button:hover {
	color: #0056b3;
}

.card-container {
	background: #fff;
	padding: 30px;
	border-radius: 10px;
	box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
	margin-top: 30px;
}

#image-preview {
	width: 200px;
	height: auto;
}
</style>
</head>

<body>
	<div class="container my-5">
		<div class="position-relative card-container">
			<a th:href="@{/admin/news}" class="back-button"><i
				class="fas fa-arrow-left"></i></a>
			<h3 class="text-center mb-4">
				<i class="fas fa-edit"></i> Sửa bài viết
			</h3>

			<form th:action="@{'/admin/news/update/' + ${news.id}}"
				th:object="${news}" method="post" enctype="multipart/form-data">

				<input type="hidden" th:field="*{id}" />

				<div class="mb-3">
					<label class="form-label">Tiêu đề</label> <input type="text"
						class="form-control" th:field="*{title}" required>
				</div>

				<div class="mb-3">
					<label class="form-label">Nội dung</label>
					<textarea id="editor" class="form-control" rows="10"
						th:field="*{content}" required></textarea>
				</div>

				<div class="mb-3 text-center">
					<img id="image-preview"
						th:src="${news.image != null} ? @{${news.image}} : @{/img/default.png}"
						alt="Ảnh bài viết" class="img-thumbnail"> <label
						for="imageFile" class="form-label d-block mt-2">Ảnh bài
						viết:</label> <input type="file" class="form-control" id="imageFile"
						name="imageFile" accept="image/*" onchange="previewImage(event)">
				</div>

				<div class="text-center">
					<button type="submit" class="btn btn-success px-4">
						<i class="fas fa-save"></i> Lưu thay đổi
					</button>
					<a th:href="@{/admin/news}" class="btn btn-secondary px-4">Quay
						lại</a>
				</div>

			</form>
		</div>
	</div>

	<script
		th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"></script>
	<script
		src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js"></script>
	<script>
        ClassicEditor.create(document.querySelector('#editor'))
            .then(editor => console.log('CKEditor initialized', editor))
            .catch(error => console.error(error));

        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function() {
                document.getElementById('image-preview').src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</body>

</html>
